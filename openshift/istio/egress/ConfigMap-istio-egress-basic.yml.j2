---
apiVersion: v1
kind: ConfigMap
metadata:
  name: istio-egress-basic
  labels:
    app.kubernetes.io/component: istio-discovery
    app.kubernetes.io/instance: {{ openshift.io_control_panel }}
    app.kubernetes.io/managed-by: maistra-istio-operator
    app.kubernetes.io/name: istio-discovery
    app.kubernetes.io/part-of: istio
    app.kubernetes.io/version: 2.0.2-3.el8-76
    istio.io/rev: basic
    maistra-version: 2.0.2
    maistra.io/owner: {{ openshift.io_control_panel }}
    release: istio
data:
  meshNetworks: 'networks: {}'
  mesh: |-
    accessLogEncoding: TEXT
    accessLogFile: /dev/stdout
    accessLogFormat: ""
    defaultConfig:
      concurrency: 2
      configPath: ./etc/istio/proxy
      controlPlaneAuthPolicy: NONE
      discoveryAddress: {{ openshift.mesh_discovery_address }}:15012
      drainDuration: 45s
      parentShutdownDuration: 1m0s
      connectTimeout: 10s
      proxyAdminPort: 15000
      proxyMetadata:
        DNS_AGENT: ""
      serviceCluster: istio-egressgateway-{{ openshift.env }}-{{ os_project.name }}
      tracing:
        tlsSettings:
          caCertificates: null
          clientCertificate: null
          mode: DISABLE
          privateKey: null
          sni: null
          subjectAltNames: []
        zipkin:
          address: jaeger-collector.{{ openshift.io_control_panel }}.svc:9411
    disableMixerHttpReports: true
    disablePolicyChecks: true
    enableAutoMtls: true
    enableEnvoyAccessLogService: false
    enablePrometheusMerge: false
    enableTracing: true
    ingressClass: istio
    ingressControllerMode: STRICT
    ingressService: istio-egressgateway
    localityLbSetting:
      enabled: true
    outboundTrafficPolicy:
      mode: ALLOW_ANY
    protocolDetectionTimeout: 5000ms
    reportBatchMaxEntries: 100
    reportBatchMaxTime: 1s
    rootNamespace: {{ openshift.io_control_panel }}
    sdsUdsPath: unix:/etc/istio/proxy/SDS
    trustDomain: cluster.local
    trustDomainAliases: null
